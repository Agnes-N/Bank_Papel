{"version":3,"sources":["loginValid.js"],"names":["validateLogin","req","res","next","schema","email","Joi","string","minDomainSegments","required","password","regex","validate","body","error","details","message","replace","includes","status","json"],"mappings":";;;;;;;AAAA;;;;AAEA,IAAMA,aAAa,GAAG,SAAhBA,aAAgB,CAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AACxC,MAAMC,MAAM,GAAG;AACbC,IAAAA,KAAK,EAAEC,gBAAIC,MAAJ,GAAaF,KAAb,CAAmB;AAAEG,MAAAA,iBAAiB,EAAE;AAArB,KAAnB,EAA6CC,QAA7C,EADM;AAEbC,IAAAA,QAAQ,EAAEJ,gBAAIC,MAAJ,GAAaI,KAAb,CAAmB,qBAAnB,EAA0CF,QAA1C;AAFG,GAAf;;AADwC,sBAKtBH,gBAAIM,QAAJ,CAAaX,GAAG,CAACY,IAAjB,EAAuBT,MAAvB,CALsB;AAAA,MAKhCU,KALgC,iBAKhCA,KALgC;;AAMxC,MAAIA,KAAJ,EAAW;AACT,QAAIA,KAAK,CAACC,OAAN,CAAc,CAAd,EAAiBC,OAAjB,CAAyBC,OAAzB,CAAiC,GAAjC,EAAsC,EAAtC,EAA0CA,OAA1C,CAAkD,IAAlD,EAAwD,EAAxD,EAA4DC,QAA5D,CAAqE,OAArE,CAAJ,EAAmF;AACjF,aAAOhB,GAAG,CAACiB,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAC1BD,QAAAA,MAAM,EAAE,GADkB;AAE1BL,QAAAA,KAAK,EAAE;AACLA,UAAAA,KAAK,EAAE;AADF;AAFmB,OAArB,CAAP;AAMD;;AACD,WAAOZ,GAAG,CAACiB,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAC1BD,MAAAA,MAAM,EAAE,GADkB;AAE1BL,MAAAA,KAAK,EAAEA,KAAK,CAACC,OAAN,CAAc,CAAd,EAAiBC,OAAjB,CAAyBC,OAAzB,CAAiC,GAAjC,EAAsC,EAAtC,EAA0CA,OAA1C,CAAkD,IAAlD,EAAwD,EAAxD;AAFmB,KAArB,CAAP;AAID;;AACDd,EAAAA,IAAI;AACL,CArBD;;eAsBeH,a","sourceRoot":"/home/agnes/Documents/Bank_Papel/server/middleware","sourcesContent":["import Joi from 'joi';\n\nconst validateLogin = (req, res, next) => {\n  const schema = {\n    email: Joi.string().email({ minDomainSegments: 2 }).required(),\n    password: Joi.string().regex(/^[a-zA-Z0-9]{3,30}$/).required(),\n  };\n  const { error } = Joi.validate(req.body, schema);\n  if (error) {\n    if (error.details[0].message.replace('/', '').replace(/\"/g, '').includes('email')) {\n      return res.status(400).json({\n        status: 400,\n        error: {\n          error: 'Incorrect email format. use: example@mail.com',\n        },\n      });\n    }\n    return res.status(400).json({\n      status: 400,\n      error: error.details[0].message.replace('/', '').replace(/\"/g, ''),\n    });\n  }\n  next();\n};\nexport default validateLogin;\n"]}